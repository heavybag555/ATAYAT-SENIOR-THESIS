/* Define the ServerMono font */
@font-face {
  font-family: "ServerMono";
  src: url("/fonts/ServerMono-Regular.otf") format("opentype");
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: "ServerMono";
  src: url("/public/fonts/ServerMono-Regular.otf") format("otf"),
    url("/public/fonts/ServerMono-Italic.otf") format("otf");
  font-weight: normal;
  font-style: normal;
}

/* Define the Olivetti Thin font */
@font-face {
  font-family: "OlivettiThin";
  src: url("/fonts/Web437_OlivettiThin_8x16.woff") format("woff");
  font-weight: normal;
  font-style: normal;
}

/* Replace the Paradise132 font definition with Cordata */
@font-face {
  font-family: "Cordata";
  src: url("/fonts/Web437_Cordata_PPC-400.woff") format("woff");
  font-weight: normal;
  font-style: normal;
}

@import "tailwindcss";

@import "./src/css/sonner.css";
@import "./src/css/viewerjs.css";

@custom-variant dark (&:where(.dark, .dark *));

@custom-variant hover {
  @media (pointer: fine) {
    &:hover {
      @slot;
    }
  }
}

@theme {
  --font-mono: "Cordata", ui-monospace, SFMono-Regular, Menlo, Monaco,
    Consolas, "Liberation Mono", "Courier New", monospace; /* Updated font family */
  --breakpoint-xs: 24.5rem;
  --breakpoint-3xl: 102rem;

  --text-xs: 0.825rem; /* Was 0.75rem */
  --text-xs--line-height: 1.1rem; /* Was 1rem */

  --text-sm: 0.928125rem; /* Was 0.84375rem */
  --text-sm--line-height: 1.30625rem; /* Was 1.1875rem */

  --text-base: 0.9625rem; /* Was 0.875rem */
  --text-base--line-height: 1.375rem; /* Was 1.25rem */

  --text-lg: 1.1rem; /* Was 1rem */
  --text-lg--line-height: 1.375rem; /* Was 1.25rem */

  --text-xl: 1.25rem; /* Was 1.125rem */
  --text-xl--line-height: 1.375rem; /* Was 1.25rem */

  --text-2xl: 1.375rem; /* Was 1.25rem */
  --text-2xl--line-height: 1.375rem; /* Was 1.25rem */

  --text-3xl: 1.65rem; /* Was 1.5rem */
  --text-3xl--line-height: 1.675rem; /* Was 1.5rem */

  --animate-fade-in: fade-in 0.5s linear both running;
  @keyframes fade-in {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }

  --animate-fade-in-from-top: fade-in-from-top 0.25s ease-in-out;
  @keyframes fade-in-from-top {
    0% {
      opacity: 0;
      transform: translateY(-10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  --animate-fade-in-from-bottom: fade-in-from-bottom 0.25s ease-in-out;
  @keyframes fade-in-from-bottom {
    0% {
      opacity: 0;
      transform: translateY(10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  --animate-rotate-pulse: rotate-pulse 0.75s linear infinite normal both running;
  @keyframes rotate-pulse {
    0% {
      transform: rotate(0deg) scale(1);
    }
    50% {
      transform: rotate(180deg) scale(0.8);
    }
    100% {
      transform: rotate(360deg) scale(1);
    }
  }

  --animate-hover-drift: hover-drift 8s linear infinite;
  @keyframes hover-drift {
    0% {
      transform: translate(0, 0);
    }
    20% {
      transform: translate(1px, -2px);
    }
    40% {
      transform: translate(1px, 1.5px);
    }
    60% {
      transform: translate(-1px, 2px);
    }
    80% {
      transform: translate(-1.5px, -1.75px);
    }
    100% {
      transform: translate(0, 0);
    }
  }

  --animate-hover-wobble: hover-wobble 6s linear infinite normal both running;
  @keyframes hover-wobble {
    0% {
      transform: rotate(0deg);
    }
    20% {
      transform: rotate(3.5deg);
    }
    40% {
      transform: rotate(-2deg);
    }
    60% {
      transform: rotate(2.5deg);
    }
    80% {
      transform: rotate(-2.5deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }
}

/* Text Primitives */
@utility text-dark {
  @apply text-gray-900;
}
@utility text-light {
  @apply text-green-400; /* Changed to neon green */
}
/* Text */
@utility text-main {
  @apply text-dark dark:text-green-400; /* Changed to neon green for dark mode */
}
@utility text-invert {
  @apply text-light dark:text-dark;
}
@utility text-medium {
  @apply text-gray-500 dark:text-green-500; /* Adjusted for dark mode */
}
@utility text-dim {
  @apply text-gray-400 dark:text-green-600; /* Darker neon green for dim text */
}
@utility text-extra-dim {
  @apply text-gray-400/80 dark:text-green-400/70; /* Semi-transparent neon green */
}
@utility text-extra-extra-dim {
  @apply text-gray-200 dark:text-green-300/50; /* Very dim neon green */
}
@utility text-icon {
  @apply text-gray-800 dark:text-green-400; /* Changed to match main text neon green for icons */
}
@utility text-error {
  @apply text-red-500 dark:text-red-400;
}
/* Border */
@utility border-main {
  @apply border border-gray-200 dark:border-green-400; /* Changed to neon green */
}
@utility divide-main {
  @apply divide-gray-200 dark:divide-green-400; /* Changed to neon green */
}
@utility border-medium {
  @apply border border-gray-200 dark:border-green-400; /* Changed to neon green */
}
@utility divide-medium {
  @apply divide-gray-200 dark:divide-green-400; /* Changed to neon green */
}

/* Background */
@utility bg-main {
  @apply bg-white dark:bg-black; /* Changed from dark:bg-[#041804] to dark:bg-black */
}
@utility bg-medium {
  @apply bg-gray-200 dark:bg-gray-700;
}
@utility bg-dim {
  @apply bg-gray-100 dark:bg-gray-900/75;
}
@utility bg-extra-dim {
  @apply bg-gray-50 dark:bg-gray-900/40;
}
@utility bg-content {
  @apply bg-main border-medium;
}
@utility bg-invert {
  @apply bg-gray-900 dark:bg-gray-100;
}
/* Baseline Grid */
@utility space-y-baseline {
  @apply space-y-[1.1875rem] md:space-y-[1.25rem];
}
@utility gap-y-baseline {
  @apply gap-y-[1.1875rem] md:gap-y-[1.25rem];
}
@utility gap-baseline {
  @apply gap-[1.1875rem] md:gap-[1.25rem];
}
@utility h-baseline {
  @apply h-[1.1875rem] md:h-[1.25rem];
}
@utility max-h-baseline {
  @apply max-h-[1.1875rem] md:max-h-[1.25rem];
}
@utility -mt-baseline {
  @apply -mt-[1.1875rem] md:-mt-[1.25rem];
}
@utility bg-baseline-grid {
  @apply bg-[repeating-linear-gradient(to_bottom,#eee,#eee_1px,transparent_1px,transparent_1.1875rem)]
    md:bg-[repeating-linear-gradient(to_bottom,#eee,#eee_1px,transparent_1px,transparent_1.25rem)]
    dark:bg-[repeating-linear-gradient(to_bottom,#222,#222_1px,transparent_1px,transparent_1.1875rem)]
    dark:md:bg-[repeating-linear-gradient(to_bottom,#222,#222_1px,transparent_1px,transparent_1.25rem)];
}

@layer base {
  /* Core */
  body {
    @apply font-mono text-sm md:text-base
      text-main
      bg-black dark:bg-black /* Changed dark theme background to black */
      tracking-[0.2em]; /* Maintained letter spacing */
  }
  /* Forms */
  label {
    @apply font-sans font-medium block uppercase text-xs
      text-green-400 dark:text-green-400 /* Changed to neon green for tag headings */
      tracking-[0.2em]; /* Increased letter spacing */
    @apply text-[0.825rem]; /* Increased from 0.75rem (xs) */
  }
  .control,
  button,
  .button,
  input[type="text"],
  input[type="email"],
  input[type="password"],
  select,
  textarea {
    @apply px-2.5 py-2
      border rounded-md
      bg-main
      border-gray-200 dark:border-green-400 /* Changed to neon green */
      font-mono text-base leading-tight
      tracking-[0.1em]; /* Increased letter spacing */
  }
  button,
  .button {
    @apply cursor-pointer
      hover:no-underline
      inline-flex gap-2 items-center
      px-3
      text-base
      shadow-xs
      bg-gray-100
      dark:bg-black /* Changed from dark:bg-[#041804] to dark:bg-black */
      text-main dark:text-white
      active:bg-gray-200 dark:active:bg-gray-800
      hover:border-gray-300 dark:hover:border-gray-700
      disabled:cursor-not-allowed
      disabled:text-dim
      disabled:bg-gray-100 dark:disabled:bg-gray-900
      disabled:border-gray-200 dark:disabled:border-gray-700;
  }
  input[type="text"],
  input[type="email"],
  input[type="password"],
  select,
  textarea {
    @apply text-[1rem] /* Prevent iOS auto-zoom behavior */
      read-only:cursor-default
      outline-blue-600 ring-blue-600 appearance-none
      focus:outline-2 -outline-offset-2 focus:ring-0;
  }
  input[type="text"],
  input[type="email"],
  input[type="password"],
  select {
    @apply min-h-[2.4rem];
  }
  input[type="text"],
  input[type="email"],
  input[type="password"],
  textarea {
    @apply read-only:bg-gray-100
      dark:read-only:bg-gray-900 dark:read-only:text-gray-400;
  }
  /* Required for readonly behavior on <select /> */
  .disabled-select {
    @apply text-medium
      bg-gray-100 dark:bg-gray-900
      pointer-events-none;
  }
  input[type="file"] {
    @apply block font-mono w-full text-medium
      file:bg-white dark:file:bg-gray-950
      file:mr-2 file:my-2 file:px-4 file:py-1.5 file:rounded-md
      file:border-solid file:border
      file:border-gray-200 dark:file:border-green-400 /* Changed to neon green */
      file:cursor-pointer
      file:shadow-xs
      file:active:bg-gray-100
      file:disabled:bg-gray-100
      file:hover:border-gray-300 file:dark:hover:border-green-300 /* Adjusted hover color */
      file:hover:disabled:border-gray-200 file:dark:hover:disabled:border-green-400 /* Adjusted disabled hover color */
      file:active:disabled:bg-white
      file:hover:disabled:cursor-not-allowed;
  }
  input[type="checkbox"] {
    @apply rounded-md
      dark:bg-transparent;
  }
  .error {
    @apply border-red-500 dark:border-red-400;
  }
  button,
  .button {
    @apply cursor-pointer
      hover:no-underline
      inline-flex gap-2 items-center
      px-3
      text-base
      shadow-xs
      bg-gray-100 /* Default background color */
      dark:bg-black /* Changed from dark:bg-[#041804] to dark:bg-black */
      text-main dark:text-white /* Ensure text is readable in dark mode */
      active:bg-gray-200 dark:active:bg-gray-800 /* Adjust active state */
      hover:border-gray-300 dark:hover:border-[#041804] /* Adjust hover border color */
      disabled:cursor-not-allowed
      disabled:text-dim
      disabled:bg-gray-100 dark:disabled:bg-gray-900
      disabled:border-gray-200 dark:disabled:border-gray-700;
  }
  button.subtle,
  .button.subtle {
    @apply disabled:shadow-none
      disabled:bg-transparent dark:disabled:bg-transparent
      disabled:border-gray-100 dark:disabled:border-gray-900;
  }
  button.primary,
  .button.primary {
    @apply text-invert
      bg-gray-900 dark:bg-[#041804] /* Updated dark theme primary button background */
      disabled:text-dim
      font-medium
      disabled:bg-gray-100 dark:disabled:bg-gray-900
      disabled:border-gray-200 dark:disabled:border-gray-700
      border-gray-900 dark:border-[#041804] /* Updated border color */
      hover:border-gray-900 dark:hover:border-[#041804] /* Updated hover border color */
      active:bg-gray-700 active:border-gray-700
      active:dark:bg-gray-800 active:dark:border-[#041804]
      shadow-none;
  }
  button.primary.disabled,
  .button.primary.disabled {
    @apply text-medium;
  }
  button.link {
    @apply p-0 min-h-0
      border-none bg-transparent active:bg-transparent shadow-none rounded-none;
  }
  a,
  .link {
    @apply hover:text-medium tracking-[0.1em]; /* Increased letter spacing */
  }
  /* Tag buttons - adding increased letter spacing */
  .tag-button {
    @apply tracking-[0.1em];
    @apply text-[1.1em] tracking-[0.1em]; /* Increased from 1em */
  }

  body.dark {
    @apply relative; /* Ensure proper stacking context */
  }

  /* Add this to your existing body styles */
  body::after {
    @apply content-[''] dark:block hidden fixed inset-0 pointer-events-none z-[9998];
    background: radial-gradient(
      circle at center,
      transparent 0,
      rgba(17, 22, 15, 0.1) 100% /* Subtle vignette using your dark bg color */
    );
  }
}

@layer components {
  .component-surface {
    @apply text-main bg-content rounded-lg;
  }
  .component-surface-light {
    @apply text-dark bg-white rounded-lg;
  }
  .component-surface-dark {
    @apply text-light bg-[#041804] rounded-lg; /* Updated dark theme background */
  }
  .component-surface-frosted {
    @apply text-black bg-neutral-200/95 rounded-lg;
  }

  .crt-overlay {
    @apply hidden dark:block fixed inset-0 pointer-events-none z-[9999];
  }

  /* CRT screen door effect */
  .crt-overlay::before {
    content: "";
    @apply block absolute inset-0 pointer-events-none;
    background: linear-gradient(
        rgba(18, 16, 16, 0) 50%,
        rgba(0, 0, 0, 0.15) 50%
      ),
      linear-gradient(
        90deg,
        rgba(255, 0, 0, 0.03),
        rgba(57, 255, 20, 0.02),
        /* Updated to match your neon green */ rgba(0, 0, 255, 0.03)
      );
    background-size: 100% 2px, 3px 100%;
  }

  /* Prevent CRT effect on media elements */
  img,
  video,
  canvas,
  iframe {
    @apply relative z-[10000]; /* Place above the CRT overlay */
  }
}
